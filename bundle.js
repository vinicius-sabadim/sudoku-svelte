var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function l(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t){e.appendChild(t)}function i(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function s(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function d(){return u(" ")}function h(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}let g;function v(e){g=e}function p(){const e=g;return(t,n)=>{const r=e.$$.callbacks[t];if(r){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,l)})}}}const m=[],$=Promise.resolve();let y=!1;const b=[],k=[],x=[];function D(e){k.push(e)}function V(){const e=new Set;do{for(;m.length;){const e=m.shift();v(e),_(e.$$)}for(;b.length;)b.shift()();for(;k.length;){const t=k.pop();e.has(t)||(t(),e.add(t))}}while(m.length);for(;x.length;)x.pop()();y=!1}function _(e){e.fragment&&(e.update(e.dirty),r(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(D))}let C;function E(){C={remaining:0,callbacks:[]}}function N(){C.remaining||r(C.callbacks)}function I(e){C.callbacks.push(e)}function w(e,n,c){const{fragment:o,on_mount:i,on_destroy:a,after_render:s}=e.$$;o.m(n,c),D(()=>{const n=i.map(t).filter(l);a?a.push(...n):r(n),e.$$.on_mount=[]}),s.forEach(D)}function A(e,t){e.$$.dirty||(m.push(e),y||(y=!0,$.then(V)),e.$$.dirty=n()),e.$$.dirty[t]=!0}function B(t,l,c,o,i,a){const s=g;v(t);const f=l.props||{},u=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(s?s.$$.context:[]),callbacks:n(),dirty:null};let d=!1;var h;u.ctx=c?c(t,f,(e,n)=>{u.ctx&&i(u.ctx[e],u.ctx[e]=n)&&(u.bound[e]&&u.bound[e](n),d&&A(t,e))}):f,u.update(),d=!0,r(u.before_render),u.fragment=o(u.ctx),l.target&&(l.hydrate?u.fragment.l((h=l.target,Array.from(h.childNodes))):u.fragment.c(),l.intro&&t.$$.fragment.i&&t.$$.fragment.i(),w(t,l.target,l.anchor),V()),v(s)}class M{$destroy(){var t,n;n=!0,(t=this).$$&&(r(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function z(e,t,n){const r=Object.create(e);return r.level=t[n],r}function G(e){var t,n,r,l,c=e.levelText[e.level];function s(){return e.click_handler(e)}return{c(){t=f("li"),n=u(c),t.className=r=(e.level===e.selectedDifficult?"active":"")+" svelte-9z0f58",l=h(t,"click",s)},m(e,r){i(e,t,r),o(t,n)},p(n,l){e=l,n.selectedDifficult&&r!==(r=(e.level===e.selectedDifficult?"active":"")+" svelte-9z0f58")&&(t.className=r)},d(e){e&&a(t),l()}}}function O(e){var t;return{c(){(t=f("p")).textContent="Victory :)",t.className="victory svelte-9z0f58"},m(e,n){i(e,t,n)},d(e){e&&a(t)}}}function W(t){for(var n,r,l,c,u,h=t.levels,g=[],v=0;v<h.length;v+=1)g[v]=G(z(t,h,v));var p=t.isVictory&&O();return{c(){n=f("div"),(r=f("h1")).textContent="Change level",l=d(),c=f("ul");for(var e=0;e<g.length;e+=1)g[e].c();u=d(),p&&p.c(),r.className="svelte-9z0f58",c.className="svelte-9z0f58",n.className="container svelte-9z0f58"},m(e,t){i(e,n,t),o(n,r),o(n,l),o(n,c);for(var a=0;a<g.length;a+=1)g[a].m(c,null);o(n,u),p&&p.m(n,null)},p(e,t){if(e.levels||e.selectedDifficult||e.levelText){h=t.levels;for(var r=0;r<h.length;r+=1){const n=z(t,h,r);g[r]?g[r].p(e,n):(g[r]=G(n),g[r].c(),g[r].m(c,null))}for(;r<g.length;r+=1)g[r].d(1);g.length=h.length}t.isVictory?p||((p=O()).c(),p.m(n,null)):p&&(p.d(1),p=null)},i:e,o:e,d(e){e&&a(n),s(g,e),p&&p.d()}}}function j(e,t,n){let{isVictory:r,selectedDifficult:l}=t;const c=p(),o=e=>{c("change-difficult",e)};return e.$set=(e=>{"isVictory"in e&&n("isVictory",r=e.isVictory),"selectedDifficult"in e&&n("selectedDifficult",l=e.selectedDifficult)}),{isVictory:r,selectedDifficult:l,handleChange:o,levels:["easy","medium","hard","veryHard","insane"],levelText:{easy:"Easy",medium:"Medium",hard:"Hard",veryHard:"Very hard",insane:"Insane"},click_handler:function({level:e}){return o(e)}}}class H extends M{constructor(e){super(),B(this,e,j,W,c,["isVictory","selectedDifficult"])}}function T(t){var n,l,c,o;return{c(){var e,r,i;(n=f("input")).className=l=(t.cell.error?"hasError":"")+" svelte-idigvb",n.disabled=c=t.cell.readonly,n.pattern="a",e=n,r="type",null==(i="text")?e.removeAttribute(r):e.setAttribute(r,i),o=[h(n,"input",t.input_input_handler),h(n,"keydown",t.handleChange)]},m(e,r){i(e,n,r),n.value=t.cell.value},p(e,t){e.cell&&n.value!==t.cell.value&&(n.value=t.cell.value),e.cell&&l!==(l=(t.cell.error?"hasError":"")+" svelte-idigvb")&&(n.className=l),e.cell&&c!==(c=t.cell.readonly)&&(n.disabled=c)},i:e,o:e,d(e){e&&a(n),r(o)}}}function S(e,t,n){let{cell:r}=t;const l=p();return e.$set=(e=>{"cell"in e&&n("cell",r=e.cell)}),{cell:r,handleChange:e=>{e.preventDefault();const t=parseInt(e.key);Number.isInteger(t)&&l("change",{value:parseInt(t,10),position:r.position})},input_input_handler:function(){r.value=this.value,n("cell",r)}}}class L extends M{constructor(e){super(),B(this,e,S,T,c,["cell"])}}const q=[Array(2).fill([1,1,2,2]),Array(2).fill([3,3,4,4])].flat(2),P=[Array(3).fill([1,1,1,2,2,2,3,3,3]),Array(3).fill([4,4,4,5,5,5,6,6,6]),Array(3).fill([7,7,7,8,8,8,9,9,9])].flat(2),F=(e=3)=>{return Array(3===e?81:16).fill(0)},J=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},K=(e,t=3)=>{const n=3===t?9:4,r=[];let l=0,c=e[l],o=J([1,2,3,4,5,6,7,8,9]),i=0;for(;Z(e);)0===c?Y(e,l,o[i],t)&&i<n?(e[l]=o[i],r.push(l),o=J([1,2,3,4,5,6,7,8,9]),i=-1,c=e[l+=1]):i>n-1&&(e[l]=0,l=r.pop(),i=o.indexOf(e[l]),e[l]=0):(c=e[l+=1],o=J([1,2,3,4,5,6,7,8,9]),i=-1),i+=1;return e},Q=(e,t=3)=>{const n=3===t?P:q;return e.map((e,t)=>({value:e,block:n[t],position:t,readonly:!!e}))},R=e=>e.reduce((e,t)=>{const n=t.block-1;return e[n]?e[n].push(t):e[n]=[t],e},[]),U={easy:62,medium:53,hard:44,veryHard:35,insane:26},X=(e,t)=>{const n=new Set;for(;n.size!==81-U[e];){const e=Math.floor(81*Math.random());n.add(e)}for(const e of n)t[e]=null;return t},Y=(e,t,n,r=3)=>{const l=new Set,c=3===r?9:4,o=3===r?P:q,i=Math.floor(t/c);e.forEach((e,t)=>{Math.floor(t/c)===i&&l.add(e)});const a=t%c;e.forEach((e,t)=>{Math.floor(t%c)===a&&l.add(e)});const s=o[t];return e.forEach((e,t)=>{o[t]===s&&l.add(e)}),!l.has(n)},Z=e=>0!==e.filter(e=>0===e).length,ee=e=>e.filter(e=>e.error).length,te=(e,t)=>e.filter(e=>null===e.value).length+t;function ne(e,t,n){const r=Object.create(e);return r.cell=t[n],r}function re(e,t,n){const r=Object.create(e);return r.block=t[n],r}function le(e){var t,n,r=new L({props:{cell:e.cell}});return r.$on("change",e.handleChange),{c(){t=f("div"),r.$$.fragment.c(),t.className="cell svelte-1h9plrt"},m(e,l){i(e,t,l),w(r,t,null),n=!0},p(e,t){var n={};e.groupedGrid&&(n.cell=t.cell),r.$set(n)},i(e){n||(r.$$.fragment.i(e),n=!0)},o(e){r.$$.fragment.o(e),n=!1},d(e){e&&a(t),r.$destroy()}}}function ce(e){for(var t,n,r,l=e.block,c=[],u=0;u<l.length;u+=1)c[u]=le(ne(e,l,u));function h(e,t,n){c[e]&&(t&&I(()=>{c[e].d(t),c[e]=null}),c[e].o(n))}return{c(){t=f("div");for(var e=0;e<c.length;e+=1)c[e].c();n=d(),t.className="block svelte-1h9plrt"},m(e,l){i(e,t,l);for(var a=0;a<c.length;a+=1)c[a].m(t,null);o(t,n),r=!0},p(e,r){if(e.groupedGrid||e.handleChange){l=r.block;for(var o=0;o<l.length;o+=1){const i=ne(r,l,o);c[o]?(c[o].p(e,i),c[o].i(1)):(c[o]=le(i),c[o].c(),c[o].i(1),c[o].m(t,n))}for(E();o<c.length;o+=1)h(o,1,1);N()}},i(e){if(!r){for(var t=0;t<l.length;t+=1)c[t].i();r=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)h(e,0,0);r=!1},d(e){e&&a(t),s(c,e)}}}function oe(e){var t,n,r,l,c=new H({props:{isVictory:e.isVictory,selectedDifficult:e.selectedDifficult}});c.$on("change-difficult",e.handleChangeDifficult);for(var u=e.groupedGrid,h=[],g=0;g<u.length;g+=1)h[g]=ce(re(e,u,g));function v(e,t,n){h[e]&&(t&&I(()=>{h[e].d(t),h[e]=null}),h[e].o(n))}return{c(){t=f("div"),c.$$.fragment.c(),n=d(),r=f("div");for(var e=0;e<h.length;e+=1)h[e].c();r.className="grid svelte-1h9plrt",t.className="container svelte-1h9plrt"},m(e,a){i(e,t,a),w(c,t,null),o(t,n),o(t,r);for(var s=0;s<h.length;s+=1)h[s].m(r,null);l=!0},p(e,t){var n={};if(e.isVictory&&(n.isVictory=t.isVictory),e.selectedDifficult&&(n.selectedDifficult=t.selectedDifficult),c.$set(n),e.groupedGrid||e.handleChange){u=t.groupedGrid;for(var l=0;l<u.length;l+=1){const n=re(t,u,l);h[l]?(h[l].p(e,n),h[l].i(1)):(h[l]=ce(n),h[l].c(),h[l].i(1),h[l].m(r,null))}for(E();l<h.length;l+=1)v(l,1,1);N()}},i(e){if(!l){c.$$.fragment.i(e);for(var t=0;t<u.length;t+=1)h[t].i();l=!0}},o(e){c.$$.fragment.o(e),h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)v(e,0,0);l=!1},d(e){e&&a(t),c.$destroy(),s(h,e)}}}function ie(e,t,n){let r,l,c="hard";const o=e=>{const t=F(3),o=K(t,3);r=X(c,o),n("gridWithBlockInfo",l=Q(r,3))};let i,a,s,f;return o(),e.$$.update=((e={gridWithBlockInfo:1,errors:1,missingValues:1})=>{e.gridWithBlockInfo&&n("groupedGrid",i=R(l)),e.gridWithBlockInfo&&n("errors",a=ee(l)),(e.gridWithBlockInfo||e.errors)&&n("missingValues",s=te(l,a)),e.missingValues&&n("isVictory",f=0===s)}),{selectedDifficult:c,handleChange:({detail:{value:e,position:t}})=>{const c=Y(r,t,e);n("gridWithBlockInfo",l=l.map(n=>n.position!==t?n:{...n,value:0!==e?e:null,error:!c})),r[t]=e},handleChangeDifficult:({detail:e})=>{n("selectedDifficult",c=e),o()},groupedGrid:i,isVictory:f}}return new class extends M{constructor(e){super(),B(this,e,ie,oe,c,[])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
